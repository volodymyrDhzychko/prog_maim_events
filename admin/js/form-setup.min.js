var $=jQuery,postID=$("#post_ID").val(),formObj=formObj,registrationForm="",changeFlag=!1;function HandleBrowseClick(e){var t=$("#"+e).parents(".field-group").find(".form-control").attr("id");document.getElementById(t).click()}function Handlechange(e){var t=$("#"+e).parents(".file-upload-wrap").find(".filename").attr("id"),a=document.getElementById(t),s=document.getElementById(e);a.value=s.value}function saveNextFunction(e){var t=$(".registration-form-select .select-form").val(),a=[];$(".display-filed-checkbox").find("input").each(function(){var e=$(this).attr("id").replace("checkbox_","");!0===$(this).prop("checked")?a.push({fieldName:e,preference:"true"}):a.push({fieldName:e,preference:"false"})}),""!==postID&&($("body").addClass("is-loading"),jQuery.ajax({url:formObj.ajaxurl,type:"POST",dataType:"json",data:{action:"save_registration_form_for_event",postID:postID,templateID:t,fieldPreference:JSON.stringify(a)},success:function(t){e&&("publish"===e?$("#publish").trigger("click"):"save-post"===e&&$("#save-post").trigger("click")),$("body").removeClass("is-loading")}}))}function formSelectAjaxFun(e,t){$("body").addClass("is-loading"),jQuery.ajax({url:formObj.ajaxurl,type:"POST",dataType:"json",data:{action:"select_registration_form_for_event",postID:e,templateID:t},success:function(e){e.status?(registrationForm=document.getElementsByClassName("registration-form-wrap"))[0].innerHTML=e.formHtml:(registrationForm=document.getElementsByClassName("registration-form-wrap"))[0].innerHTML='<div class="templete-not-selected">Please select a registration template.</div>',$("body").removeClass("is-loading")}})}jQuery(document).ready(function(){$(document).on("change",".registration-form-select .select-form",function(){var e=$(this).val();(changeFlag=!0)&&$(".reset").removeAttr("disabled"),$("#templateId").val(e),""!==e?formSelectAjaxFun(postID,e):(registrationForm=document.getElementsByClassName("registration-form-wrap"))[0].innerHTML='<div class="templete-not-selected">Please select a registration template.</div>'}),$(document).on("click",".registration_form",function(e){var t=$("#templateId").val();e.preventDefault(),""!==postID?formSelectAjaxFun(postID,t):(registrationForm=document.getElementsByClassName("registration-form-wrap"))[0].innerHTML='<div class="templete-not-selected">Please select a registration template.</div>'}),$(document).on("click",".submitbox #publish, #save-action",function(e){if(e.stopPropagation(),$(".for_event").remove(),errorMsgs="",0!==$("body.post-type-dffmain-events").length&&(0===$("#set-post-thumbnail img").length&&(errorMsgs+="<p>Please set Featured Image.</p>"),""===jQuery("#event_date_select").val()&&(errorMsgs+="<p>Please select Event Date.</p>"),""===$(".event_time_start_select").val()&&(errorMsgs+="<p>Please select Event Start Time.</p>"),""===$(".event_time_end_select").val()&&(errorMsgs+="<p>Please select Event End Time.</p>"),""===$(".registration-form-select select").val()&&(errorMsgs+="<p>Please select a registration template.</p>")),""!==errorMsgs)return $('<div class="error notice for_event">'+errorMsgs+"</div>").insertAfter(".wp-header-end"),!1;var t=$(this).attr("id");if($(this).toggleClass("saving"),!$(this).hasClass("saving"))return!1;saveNextFunction(t)}),$(document).on("click","#registration_form .save_next",function(e){e.stopPropagation(),saveNextFunction(!1)}),$(document).on("click","#arabic .save_next",function(e){e.stopPropagation();var t=$("#templateId").val();""!==postID?formSelectAjaxFun(postID,t):(registrationForm=document.getElementsByClassName("registration-form-wrap"))[0].innerHTML='<div class="templete-not-selected">Please select a registration template.</div>'}),$(document).on("click","#registration_form .reset",function(e){var t=$(this).attr("templateid");$(".registration-form-select .select-form").val(t),""!==postID?formSelectAjaxFun(postID,t):(registrationForm=document.getElementsByClassName("registration-form-wrap"))[0].innerHTML='<div class="templete-not-selected">Please select a registration template.</div>'}),$(document).on("change",".display-filed-checkbox input",function(){(changeFlag=!0)&&$(".reset").removeAttr("disabled")}),$(document).on("click",".close",function(){$(".modal-popup").remove()}),$(document).keyup(function(e){27===e.keyCode&&$(".modal-popup").remove()}),$(document).on("click",".view-detail",function(){var e=$(this).attr("AttendeeId");$(".modal-popup").remove(),$("body").addClass("is-loading"),jQuery.ajax({url:formObj.ajaxurl,type:"POST",dataType:"json",data:{action:"get_attendee_details",AttendeeId:e},success:function(e){e.status&&(document.getElementsByTagName("body")[0].innerHTML+='<div class="modal-popup">'+e.details_html+"</div>");$("body").removeClass("is-loading")}})}),$(".security_code_checkbox").change(function(){$(this).is(":checked")?$("#security_code").show():$("#security_code").hide()}),$(".post-type-registration-forms .total_associated_events").find("a").each(function(){"0"!==$(this).text()&&($(this).parents("tr").find(".row-actions .trash").remove(),$(this).parents("tr").find(".row-actions .edit").contents().eq(1).remove())})});